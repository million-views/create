---
title: "Template Author Workflow"
type: "how-to"
audience: "template-authors"
estimated_time: "10 minutes"
prerequisites:
   - "Read reference/environment.md"
   - "Read creating-templates.md"
related_docs:
   - "creating-templates.md"
  - "../reference/environment.md"
  - "../how-to/setup-recipes.md"
last_updated: "2024-11-07"
---

# Template Author Workflow

This guide helps template authors iterate efficiently while respecting the division of responsibilities between make-template (author tooling) and @m5nv/create-scaffold (consumer tooling). Follow these loops to keep your templates reliable and predictable.

## 1. Restore-first iteration (WYSIWYG mode)

WYSIWYG templates mirror a working application. Iterate directly in the project, then regenerate the template when you are satisfied.

1. **Restore the working app**
   ```bash
   npm run make-template:restore
   ```
   > The command above is generated by make-template and rehydrates the project based on `.template-undo.json`.

2. **Edit the application**
   Make functional changes, run the app, and commit to source control as usual.

3. **Regenerate the template**
   ```bash
   npm run make-template:convert
   ```

4. **Dry-run verification (optional)**
   Use create-scaffold to ensure metadata and handoff instructions render correctly:
   ```bash
   create-scaffold demo-app --from-template my-template --repo path/to/templates --dry-run
   ```

### Checklist for WYSIWYG templates

- `setup.authoringMode` is `"wysiwyg"` and `setup.dimensions` is `{}`.
- `_setup.mjs` limits itself to placeholder replacement and light adjustments.
- `handoff` instructions cover install and startup steps.
- `.template-undo.json` remains checked in to support future restores.

## 2. Composable iteration (feature combinations)

Composable templates assemble different variants from a single source. Use author assets and dimension metadata to keep behaviour deterministic.

1. **Restore the base project (same as WYSIWYG)**
   ```bash
   npm run make-template:restore
   ```

2. **Author or update snippets inside `__scaffold__/`**
   Store reusable assets under the directory defined by `setup.authorAssetsDir` (defaults to `__scaffold__/`). Treat it as read-only at runtimeâ€”`create-scaffold` stages it before `_setup.mjs` runs and removes it afterwards.

3. **Update `template.json` dimensions**
   - Add or refine values under `setup.dimensions`.
   - Capture dependencies with `requires` and mutual exclusions with `conflicts`.
   - Use `"policy": "warn"` sparingly; `"strict"` keeps feedback crisp.

4. **Codify behaviour in `_setup.mjs`**
   Rely on `tools.options.in()` and `tools.options.require()` to govern features. Avoid manual parsing of `ctx.options.raw`.

5. **Verify combinations**
   ```bash
   # Default selection
   create-scaffold demo-default --from-template my-template --repo path/to/templates --dry-run

   # Specific capability mix
   create-scaffold demo-auth --from-template my-template --repo path/to/templates \
     --options "capabilities=auth+testing,infrastructure=cloudflare-d1" --dry-run
   ```

### Checklist for composable templates

- `setup.authoringMode` is `"composable"`.
- Every dimension in `template.json` lists allowed values and sensible defaults.
- `_setup.mjs` uses helper APIs only (`tools.files`, `tools.json`, `tools.options`).
- Author assets live under `__scaffold__/` (or your configured alias) and are treated as immutable inputs.
- Dry runs cover the default path plus each supported dimension combination.

## 3. Before publishing or sharing

- Run the full test suite for your template (unit tests, linting, integration checks).
- Update `handoff` instructions so operators know the first commands to run.
- Cross-link consumer docs: mention supported dimensions, recommended options, and IDE presets.
- Consider adding an appendix in the template README summarizing dimensions and defaults. Link to the [Dimensions Glossary](../reference/dimensions-glossary.md) so teams stay aligned.

Following these loops keeps template iteration fast while ensuring @m5nv/create-scaffold users receive clean, deterministic scaffolds every time.
